<!DOCTYPE html>
<html lang="fr">
  <head>
    <%- include('partials/header') %>
    <title><%= title %></title>
  </head>
  <body>
    <div class="container">
      <header class="my-4">
        <h1><%= title %></h1>
        <a href="/" class="btn btn-secondary mb-3">
          <i class="bi bi-arrow-left me-2"></i>Retour à l'accueil
        </a>
      </header>

      <div class="row">
        <div class="col-md-12">
          <div class="card shadow">
            <div class="card-header bg-primary text-white">
              <h3 class="card-title mb-0">Sessions mensuelles</h3>
            </div>
            <div class="card-body">
              <% if (months.length > 0) { %>
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>Période</th>
                    <th>Mois</th>
                    <th>Année</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  <% months.forEach(m => { %>
                  <tr>
                    <td>
                      <% const monthNames = ['Jan', 'Fév', 'Mar', 'Avr', 'Mai',
                      'Jun', 'Jul', 'Aoû', 'Sep', 'Oct', 'Nov', 'Déc']; %> <%=
                      monthNames[m.month - 1] %> <%= m.year %>
                    </td>
                    <td><%= m.month %></td>
                    <td><%= m.year %></td>
                    <td>
                      <a
                        href="/history/<%= m.year %>-<%= m.month.toString().padStart(2, '0') %>"
                        class="btn btn-sm btn-outline-primary"
                      >
                        <i class="bi bi-eye me-1"></i>Voir détails
                      </a>
                    </td>
                  </tr>
                  <% }) %>
                </tbody>
              </table>
              <% } else { %>
              <div class="alert alert-info">
                Aucune session de réconciliation n'a encore été créée.
              </div>
              <% } %>
            </div>
          </div>
        </div>
      </div>
    </div>

    <%- include('partials/footer') %>
  </body>
</html>
